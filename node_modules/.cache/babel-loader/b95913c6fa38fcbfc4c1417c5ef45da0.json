{"ast":null,"code":"var _jsxFileName = \"/Users/benedicttedjokusumo/Desktop/hack-a-thing-1-22f-benny/src/GameScene.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './GameScene.css';\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, set, child, get } from \"firebase/database\";\nimport WinScreen from './WinScreen';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Game1 = _ref => {\n  _s();\n\n  let {\n    keyRef,\n    targets,\n    nums,\n    limit,\n    solution\n  } = _ref;\n  const [count, setCount] = useState(targets[0]);\n  const [doneTarget, setDone] = useState(1);\n  const [operationCount, setOCount] = useState(0);\n  const [hintNum, setHints] = useState(0);\n  const [bestTime, setBestTime] = useState(0);\n  let [operations] = useState([]);\n  let [countHistory] = useState([targets[0]]);\n  let [targetHistory] = useState([0]);\n  const [time, setTime] = useState(0);\n  const [running, setRunning] = useState(false);\n  const [complete, setComplete] = useState(false); // Database code sourced from https://firebase.google.com/docs/database/web/read-and-write?hl=en&authuser=3#web-version-9_2\n\n  const firebaseConfig = {\n    databaseURL: \"https://operators-a44ee-default-rtdb.firebaseio.com\"\n  }; // Initialize Firebase\n\n  const app = initializeApp(firebaseConfig); // Initialize Realtime Database and get a reference to the service\n\n  const database = getDatabase(app);\n  const dbRef = ref(database);\n\n  const readDatabase = () => {\n    get(child(dbRef, keyRef)).then(snapshot => {\n      if (snapshot.exists()) {\n        console.log(snapshot.val());\n        setComplete(true);\n        setTime(snapshot.val().time);\n        setHints(snapshot.val().hints);\n        get(child(dbRef, 'users/best')).then(time => {\n          console.log(time.val());\n          setBestTime(time.val());\n        });\n      } else {\n        console.log(\"No data available\");\n      }\n    }).catch(error => {\n      console.log('huh'); // console.error(error);\n    });\n  }; // Timer code sourced from https://w3collective.com/react-stopwatch/\n\n\n  useEffect(() => {\n    readDatabase();\n    let interval;\n    if (keyRef && !complete) setRunning(true);else setRunning(false);\n\n    if (running) {\n      interval = setInterval(() => {\n        setTime(prevTime => prevTime + 10);\n      }, 10);\n    } else if (!running) {\n      clearInterval(interval);\n    }\n\n    return () => clearInterval(interval);\n  }, [running, complete, keyRef]);\n\n  const writeToDataBase = (currTime, hints, solution) => {\n    set(ref(database, keyRef), {\n      time: currTime,\n      hints: hints,\n      solution: solution\n    });\n    get(child(dbRef, 'users/best')).then(snapshot => {\n      if (snapshot.exists()) {\n        if (currTime < snapshot.val()) set(ref(database, 'users/best'), currTime);\n      } else {\n        console.log(\"No data available\");\n      }\n    });\n  };\n\n  const levelCompleted = () => {\n    writeToDataBase(time, hintNum, operations);\n    setComplete(true);\n    setRunning(false);\n  };\n\n  const pressOperation = num => {\n    if (operationCount <= limit - 1) {\n      const newCount = performOperation(num);\n\n      if (newCount || newCount === 0) {\n        countHistory.push(newCount);\n        targets.forEach((target, idx) => {\n          if (doneTarget === idx && target === newCount) {\n            setDone(doneTarget + 1);\n            targetHistory.push(1);\n\n            if (doneTarget === 3) {\n              levelCompleted();\n            }\n          }\n        });\n        if (targetHistory.length < countHistory.length) targetHistory.push(0);\n        operations.push(num);\n        setOCount(operationCount + 1);\n        setCount(newCount);\n      }\n    } else {\n      console.log('warning!');\n    }\n  };\n\n  const performOperation = operation => {\n    const value = count; // console.log(value)\n\n    if (operation.includes(\"sqrt\") && value > 0 && Math.sqrt(value) % 1 === 0) {\n      return Math.sqrt(value);\n    } else if (!operation.includes(\"sqrt\")) {\n      const operand = operation.charAt(0);\n      const number = parseInt(operation.substr(1, operation.length));\n\n      if (operand === \"/\" && value % number === 0 && value !== 0) {\n        return value / number;\n      } else if (operand === \"+\") {\n        return value + number;\n      } else if (operand === \"-\") {\n        return value - number;\n      } else if (operand === \"*\") {\n        return value * number;\n      }\n    }\n  };\n\n  const undoButton = () => {\n    if (operationCount > 0) {\n      let prev_operation = operations.pop();\n      const newCount = performUndo(prev_operation); // eslint-disable-next-line react/prop-types\n\n      targets.forEach((target, idx) => {\n        if (doneTarget === idx + 1 && target === count && targetHistory[operations.length + 1] === 1) {\n          setDone(doneTarget - 1);\n        }\n      });\n      targetHistory.pop();\n      countHistory.pop();\n      setOCount(operationCount - 1);\n      setCount(newCount);\n    } else {\n      console.log('Can not undo!');\n    }\n  };\n\n  const performUndo = operation => {\n    const value = count;\n\n    if (operation.includes(\"sqrt\") && value > 0 && Math.sqrt(value) % 1 === 0) {\n      return Math.sqrt(value);\n    } else if (!operation.includes(\"sqrt\")) {\n      const operand = operation.charAt(0);\n      const number = parseInt(operation.substr(1, operation.length));\n\n      if (operand === \"/\") {\n        return value * number;\n      } else if (operand === \"+\") {\n        return value - number;\n      } else if (operand === \"-\") {\n        return value + number;\n      } else if (operand === \"*\") {\n        return value / number;\n      } else {\n        return false;\n      }\n    }\n  };\n\n  const reset = () => {\n    setCount(targets[0]);\n    setDone(1);\n    setOCount(0);\n\n    for (let i = countHistory.length; i > 1; i--) {\n      countHistory.pop();\n      targetHistory.pop();\n      operations.pop();\n    }\n  };\n\n  const getHint = () => {\n    if (solution.length > hintNum) {\n      setHints(hintNum + 1);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"gameScene\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Time: \", time.toString().slice(0, -3)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"countHistory\",\n        children: countHistory.map((elm, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"count-operation\",\n            children: operations[idx - 1]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: targetHistory[idx] === 1 || idx === 0 ? \"count-num-target\" : 'count-num',\n            children: elm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"solutions\",\n        children: solution.map((elm, idx) => /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"solution\",\n          children: hintNum > idx ? elm : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: count\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Limit:\", ' ', operationCount, \"/\", limit]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"targets\",\n        children: targets.map((target, idx) => /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: doneTarget > idx ? 'done' : '',\n          children: `${idx === 0 ? '' : ' -> '}${target}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), complete ? /*#__PURE__*/_jsxDEV(WinScreen, {\n        time: time,\n        hints: hintNum,\n        best: bestTime\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 22\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"operations\",\n        children: nums.map(num => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"operation\",\n          type: \"button\",\n          onClick: () => pressOperation(num),\n          children: num\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"operations\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => undoButton(),\n          children: \"undo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => reset(),\n          children: \"reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => getHint(),\n          children: \"hint\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Game1, \"D+jfjVsV6XoQWovPboaRZtaGXCw=\");\n\n_c = Game1;\nexport default Game1;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game1\");","map":{"version":3,"names":["React","useState","useEffect","initializeApp","getDatabase","ref","set","child","get","WinScreen","Game1","keyRef","targets","nums","limit","solution","count","setCount","doneTarget","setDone","operationCount","setOCount","hintNum","setHints","bestTime","setBestTime","operations","countHistory","targetHistory","time","setTime","running","setRunning","complete","setComplete","firebaseConfig","databaseURL","app","database","dbRef","readDatabase","then","snapshot","exists","console","log","val","hints","catch","error","interval","setInterval","prevTime","clearInterval","writeToDataBase","currTime","levelCompleted","pressOperation","num","newCount","performOperation","push","forEach","target","idx","length","operation","value","includes","Math","sqrt","operand","charAt","number","parseInt","substr","undoButton","prev_operation","pop","performUndo","reset","i","getHint","toString","slice","map","elm"],"sources":["/Users/benedicttedjokusumo/Desktop/hack-a-thing-1-22f-benny/src/GameScene.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './GameScene.css';\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, set, child, get } from \"firebase/database\";\nimport WinScreen from './WinScreen';\n\n\nconst Game1 = ({\n  keyRef, targets, nums, limit, solution\n}) => {\n  const [count, setCount] = useState(targets[0]);\n  const [doneTarget, setDone] = useState(1);\n  const [operationCount, setOCount] = useState(0);\n  const [hintNum, setHints] = useState(0);\n  const [bestTime, setBestTime] = useState(0);\n  \n  let [operations] = useState([]);\n  let [countHistory] = useState([targets[0]])\n  let [targetHistory] = useState([0]);\n\n  const [time, setTime] = useState(0);\n  const [running, setRunning] = useState(false);\n  const [complete, setComplete] = useState(false);\n\n  // Database code sourced from https://firebase.google.com/docs/database/web/read-and-write?hl=en&authuser=3#web-version-9_2\n  const firebaseConfig = {\n    databaseURL: \"https://operators-a44ee-default-rtdb.firebaseio.com\",\n  };\n  \n  // Initialize Firebase\n  const app = initializeApp(firebaseConfig);\n  // Initialize Realtime Database and get a reference to the service\n  const database = getDatabase(app);\n  const dbRef = ref(database);\n\n  const readDatabase = () => {\n    get(child(dbRef, keyRef)).then((snapshot) => {\n      if (snapshot.exists()) {\n        console.log(snapshot.val())\n        setComplete(true)\n        setTime(snapshot.val().time)\n        setHints(snapshot.val().hints)\n        get(child(dbRef, 'users/best')).then((time) => {\n          console.log(time.val())\n          setBestTime(time.val())\n        })\n      } else {\n        console.log(\"No data available\");\n      }\n    }).catch((error) => {\n      console.log('huh')\n      // console.error(error);\n    });\n  }\n  // Timer code sourced from https://w3collective.com/react-stopwatch/\n  useEffect(() => {\n    readDatabase()\n\n    let interval;\n    if(keyRef && !complete) setRunning(true)\n    else setRunning(false)\n    if (running) {\n      interval = setInterval(() => {\n        setTime((prevTime) => prevTime + 10);\n      }, 10);\n    } else if (!running) {\n      clearInterval(interval);\n    }\n    return () => clearInterval(interval);\n  }, [running, complete, keyRef]);\n  \n  const writeToDataBase = (currTime, hints, solution) => {\n    set(ref(database, keyRef), {\n      time: currTime,\n      hints: hints,\n      solution: solution\n    });\n    get(child(dbRef, 'users/best')).then((snapshot) => {\n      if (snapshot.exists()) {\n        if (currTime < snapshot.val())\n        set(ref(database, 'users/best'), currTime);\n        \n      } else {\n        console.log(\"No data available\");\n      }\n    })\n  }\n  \n\n  const levelCompleted = () => {\n    writeToDataBase(time, hintNum,operations)\n    setComplete(true)\n    setRunning(false)\n  }\n\n  const pressOperation = (num) => {\n    if (operationCount <= limit - 1) {\n\n      const newCount = performOperation(num);\n      if (newCount || newCount === 0) {\n        countHistory.push(newCount);\n\n        targets.forEach((target, idx) => {\n          if (doneTarget === idx && target === newCount) {\n            setDone(doneTarget + 1);\n            targetHistory.push(1);\n            if (doneTarget === 3) {\n              levelCompleted()\n            }\n          }\n        });\n  \n        if (targetHistory.length < countHistory.length)\n          targetHistory.push(0)\n        operations.push(num);\n        setOCount(operationCount + 1);\n        setCount(newCount);\n      }\n    } else {\n      console.log('warning!');\n    }\n  };\n\n  const performOperation = (operation) => {\n    const value = count;\n    // console.log(value)\n    if (operation.includes(\"sqrt\") && value > 0 && Math.sqrt(value) % 1 === 0) {\n      return Math.sqrt(value)\n    }\n    else if (!operation.includes(\"sqrt\")) {\n      const operand = operation.charAt(0)\n      const number = parseInt(operation.substr(1,operation.length))\n      if (operand === \"/\" && value % number === 0 && value !== 0){\n        return value / number;\n      }\n      else if (operand === \"+\") {\n        return value + number\n      }\n      else if (operand === \"-\") {\n        return value - number\n      }\n      else if (operand === \"*\") {\n        return value * number\n      }\n    }\n  }\n\n  const undoButton = () => {\n\n    if (operationCount > 0) {\n      let prev_operation = operations.pop();\n      const newCount = performUndo(prev_operation);\n      // eslint-disable-next-line react/prop-types\n      targets.forEach((target, idx) => {\n        if (doneTarget === idx+1 && target === count && targetHistory[operations.length+1] === 1) {\n          setDone(doneTarget - 1);\n        }\n      });\n      targetHistory.pop();\n      countHistory.pop();\n      setOCount(operationCount - 1);\n      setCount(newCount);\n    } else {\n      console.log('Can not undo!');\n    }\n  };\n\n  const performUndo = (operation) => {\n    const value = count;\n    if (operation.includes(\"sqrt\") && value > 0 && Math.sqrt(value) % 1 === 0) {\n      return Math.sqrt(value)\n    }\n    else if (!operation.includes(\"sqrt\")) {\n      const operand = operation.charAt(0)\n      const number = parseInt(operation.substr(1,operation.length))\n      if (operand === \"/\"){\n        return value * number;\n      }\n      else if (operand === \"+\") {\n        return value - number\n      }\n      else if (operand === \"-\") {\n        return value + number\n      }\n      else if (operand === \"*\") {\n        return value / number\n      }\n      else {\n        return false;\n      }\n    }\n  }\n\n  const reset = () => {\n    setCount(targets[0]);\n    setDone(1);\n    setOCount(0);\n    for (let i = countHistory.length; i > 1; i--) {\n      countHistory.pop();\n      targetHistory.pop();\n      operations.pop();\n    }\n  }\n\n  const getHint = () => {\n\n    if (solution.length > hintNum)\n    {\n      setHints(hintNum + 1);\n    }\n  }\n  return (\n\n    <div className=\"gameScene\">\n      <div className='history'>\n        <h1>Time: {time.toString().slice(0, -3)}</h1>\n        <h2>History</h2>\n        <div className='countHistory'>\n          {countHistory.map((elm, idx) => (\n            <div>\n              <p className= \"count-operation\" >{operations[idx-1]}</p>\n              <p className={targetHistory[idx] === 1  || idx === 0 ? \"count-num-target\" : 'count-num'}>{elm}</p>\n            </div>\n          ))}\n        </div>\n\n        <div className='solutions'>\n\n          {solution.map((elm, idx) => (\n              <p className=\"solution\">{hintNum > idx ? elm : null}</p>\n          ))}\n        </div>\n      </div>\n\n      <div>\n        <h1>{count}</h1>\n        <h3>\n          Limit:\n          {' '}\n          {operationCount}\n          /\n          {limit}\n        </h3>\n        <div className=\"targets\">\n          {targets.map((target, idx) => (\n            <h2 className={doneTarget > idx ? 'done' : ''}>\n              {`${idx === 0 ? '' : ' -> '}${target}`}\n            </h2>\n          ))}\n        </div>\n        { complete ? <WinScreen time={time} hints={hintNum} best={bestTime}/> : null}\n        <div className=\"operations\">\n          {nums.map((num) => (\n            <button className=\"operation\" type=\"button\" onClick={() => pressOperation(num)}>{num}</button>\n          ))}\n        </div>\n\n        <div className=\"operations\">\n          <button type=\"button\" onClick={() => undoButton()}>undo</button>\n          <button type=\"button\" onClick={() => reset()}>reset</button>\n          <button type=\"button\" onClick={() => getHint()}>hint</button>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default Game1;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}